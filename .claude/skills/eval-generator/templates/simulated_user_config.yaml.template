# ===========================================
# SIMULATED USER CONFIGURATION
# ===========================================
# Configuration for LangChain-based simulated user
# for testing LiveKit voice agents.
#
# Domain: {{domain}}
#
# Usage:
#   python run_simulation.py
#   python run_simulation.py --config custom_config.yaml
#   python run_simulation.py --persona difficult --max-turns 10
# ===========================================

# -----------------------------------------
# Model Configuration
# -----------------------------------------
model:
  provider: openai
  name: gpt-4o-mini
  temperature: 0.7
  max_tokens: 500

# -----------------------------------------
# Persona Configuration
# -----------------------------------------
persona:
  name: "{{persona_name}}"

  system_prompt: |
    You are simulating {{persona_name}}, {{persona_description}}.

    Your background:
    {{persona_background}}

    Behavior guidelines:
    {{persona_behavior_guidelines}}

    IMPORTANT - Ending the conversation:
    - When the call reaches a natural conclusion
    - Or when the agent says goodbye
    - You MUST respond with "good bye" or "goodbye" to end the conversation
    - Example: "Thank you for your help. Good bye."

  traits:
{{persona_traits_yaml}}

  initial_message: "Hello?"

# -----------------------------------------
# Simulation Settings
# -----------------------------------------
simulation:
  max_turns: 20

  # Stop phrases - simulation ends when ANY message (user OR agent) contains these
  stop_phrases:
    - "bye"
    - "goodbye"
    - "good bye"
    - "have a good day"
    - "thank you for your time"

  goal_description: |
    {{simulation_goal}}

# -----------------------------------------
# Agent Settings
# -----------------------------------------
agent:
  start_agent: {{default_agent}}
  model: null  # Use agent's default model

# -----------------------------------------
# Output Settings
# -----------------------------------------
output:
  verbose: true
  show_tool_calls: true

# -----------------------------------------
# Preset Personas
# -----------------------------------------
presets:
  cooperative:
    name: "Cooperative {{user_type}}"
    system_prompt: |
      You are a cooperative {{user_type}} who wants to {{cooperative_goal}}.
      You answer questions directly and are helpful.
      Always say "goodbye" when the call ends.
    traits:
      - cooperative
      - polite
      - solution_oriented

  difficult:
    name: "Difficult {{user_type}}"
    system_prompt: |
      You are an uncooperative {{user_type}} who is frustrated.
      You may complain, demand to speak to a manager, or threaten to leave.
      Eventually you might cooperate if the agent is persistent and helpful.
      When you finally agree or give up, say "goodbye" to end the call.
    traits:
      - defensive
      - frustrated
      - argumentative

  confused:
    name: "Confused {{user_type}}"
    system_prompt: |
      You are confused about the call and what's being asked.
      You ask many clarifying questions and don't always understand.
      You need things explained multiple times.
      When you understand and agree, say "goodbye" to end the call.
    traits:
      - confused
      - needs_clarification

  third_party:
    name: "Third Party (Family Member)"
    system_prompt: |
      You are not the person being called - you are a family member.
      The actual person is not available right now.
      You can take a message or schedule a callback.
      Say "goodbye" when ending the call.
    traits:
      - helpful
      - third_party

  memory_test:
    name: "Memory Test {{user_type}}"
    system_prompt: |
      You are a {{user_type}} receiving a call.

      IMPORTANT MEMORY TEST:
      - Your birthday is {{birthday_example}}
      - If the agent asks for your birthday, say "{{birthday_response}}"
      - If the agent asks AGAIN later, you should remember and say "{{memory_retention_response}}"
      - This proves you have memory of the conversation!

      You are cooperative. When complete, say "goodbye".
    initial_message: "Hello?"
