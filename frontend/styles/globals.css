@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Claude Design Language - Light Mode */
  --claude-primary: #da7756;
  --claude-primary-hover: #c5664a;
  --claude-primary-foreground: #ffffff;

  --claude-background: #F4F3EE;
  --claude-background-secondary: #ffffff;
  --claude-background-tertiary: #E8E6E1;

  --claude-foreground: #1a1816;
  --claude-foreground-muted: #57534e;
  --claude-foreground-subtle: #a8a29e;

  --claude-user-bubble: #da7756;
  --claude-user-bubble-text: #ffffff;
  --claude-assistant-bubble: #ffffff;
  --claude-assistant-bubble-text: #1a1816;

  --claude-tool-use-bg: #FEF3C7;
  --claude-tool-result-bg: #D1FAE5;
  --claude-tool-error-bg: #FEE2E2;

  --claude-border: #d6d3d1;
  --claude-border-subtle: #e7e5e4;
  --claude-accent: #da7756;

  --claude-success: #10B981;
  --claude-warning: #F59E0B;
  --claude-error: #EF4444;

  /* Typography */
  --font-serif: 'Georgia', 'Times New Roman', serif;
  --font-sans: system-ui, -apple-system, sans-serif;
  --font-mono: 'Fira Code', 'Monaco', 'Consolas', monospace;

  /* Border radius */
  --radius: 0.75rem;
}

.dark {
  --claude-primary: #da7756;
  --claude-primary-hover: #e8896a;
  --claude-primary-foreground: #ffffff;

  --claude-background: #1a1816;
  --claude-background-secondary: #292524;
  --claude-background-tertiary: #3f3a36;

  --claude-foreground: #fafaf9;
  --claude-foreground-muted: #a8a29e;
  --claude-foreground-subtle: #78716c;

  --claude-user-bubble: #da7756;
  --claude-user-bubble-text: #ffffff;
  --claude-assistant-bubble: #292524;
  --claude-assistant-bubble-text: #fafaf9;

  --claude-tool-use-bg: #422006;
  --claude-tool-result-bg: #064E3B;
  --claude-tool-error-bg: #7F1D1D;

  --claude-border: #44403c;
  --claude-border-subtle: #3f3a36;
}

/* Base styles for Claude Design Language */
body {
  font-family: var(--font-serif);
  background-color: var(--claude-background);
  color: var(--claude-foreground);
}

/* Custom prose styles for assistant messages */
.prose-claude {
  --tw-prose-body: var(--claude-assistant-bubble-text);
  --tw-prose-headings: var(--claude-foreground);
  --tw-prose-code: var(--claude-primary);
}

/* Message animations */
@keyframes fadeSlideIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

@keyframes bounce-soft {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

.message-enter { animation: fadeSlideIn 0.2s ease-out; }
.typing-cursor { animation: blink 1s infinite; }
.animate-bounce-soft { animation: bounce-soft 0.6s infinite; }

/* Scrollbar styling */
.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: var(--claude-border) transparent;
}

.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: var(--claude-border);
  border-radius: 3px;
}

@layer base {
  :root {
    /* Light mode surfaces (legacy compatibility) */
    --surface-primary: #FDFCFB;
    --surface-secondary: #F9F7F4;
    --surface-tertiary: #F3EFE9;
    --surface-inverse: #2A2520;

    /* Light mode text (legacy compatibility) */
    --text-primary: #2A2520;
    --text-secondary: #5C5047;
    --text-tertiary: #958777;
    --text-inverse: #FDFCFB;
    --text-accent: #EA580C;

    /* Light mode borders (legacy compatibility) */
    --border-primary: #E8E2D9;
    --border-secondary: #D4CBC0;
    --border-accent: #FB923C;

    /* Scrollbar (legacy compatibility) */
    --scrollbar-bg: #F3EFE9;
    --scrollbar-thumb: #D4CBC0;
    --scrollbar-thumb-hover: #B8AC9E;
  }

  .dark {
    /* Dark mode surfaces (legacy compatibility) */
    --surface-primary: #2A2520;
    --surface-secondary: #413A33;
    --surface-tertiary: #5C5047;
    --surface-inverse: #FDFCFB;

    /* Dark mode text (legacy compatibility) */
    --text-primary: #F9F7F4;
    --text-secondary: #D4CBC0;
    --text-tertiary: #958777;
    --text-inverse: #2A2520;
    --text-accent: #FB923C;

    /* Dark mode borders (legacy compatibility) */
    --border-primary: #5C5047;
    --border-secondary: #756859;
    --border-accent: #F97316;

    /* Scrollbar (legacy compatibility) */
    --scrollbar-bg: #413A33;
    --scrollbar-thumb: #756859;
    --scrollbar-thumb-hover: #958777;
  }

  /* Base styles */
  * {
    @apply border-border-primary;
  }

  html {
    @apply scroll-smooth;
  }

  /* Focus styles */
  *:focus-visible {
    @apply outline-none ring-2 ring-claude-orange-500 ring-offset-2 ring-offset-surface-primary;
  }

  /* Selection styles */
  ::selection {
    @apply bg-claude-orange-200 text-claude-orange-900;
  }

  .dark ::selection {
    @apply bg-claude-orange-900 text-claude-orange-100;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }

  ::-webkit-scrollbar-track {
    background: var(--scrollbar-bg);
    @apply rounded-full;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    @apply rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
  }

  /* Firefox scrollbar */
  * {
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-bg);
  }
}

@layer components {
  /* Typography - Extended prose-claude with Tailwind classes */
  .prose-claude-extended {
    @apply prose prose-slate dark:prose-invert max-w-none;
    @apply prose-headings:font-serif prose-headings:text-text-primary;
    @apply prose-p:text-text-secondary prose-p:leading-relaxed;
    @apply prose-a:text-claude-orange-600 prose-a:no-underline hover:prose-a:underline;
    @apply prose-code:text-claude-orange-700 prose-code:bg-surface-tertiary prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded;
    @apply prose-pre:bg-surface-inverse prose-pre:text-text-inverse;
    @apply prose-blockquote:border-l-claude-orange-500 prose-blockquote:bg-surface-secondary prose-blockquote:py-1;
  }

  /* Card variants */
  .card {
    @apply bg-surface-secondary rounded-xl border border-border-primary shadow-soft;
  }

  .card-hover {
    @apply card transition-all duration-200;
    @apply hover:shadow-medium hover:border-border-accent hover:-translate-y-0.5;
  }

  /* Button base */
  .btn {
    @apply inline-flex items-center justify-center gap-2;
    @apply rounded-lg font-medium transition-all duration-200;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    @apply disabled:opacity-50 disabled:pointer-events-none;
  }

  .btn-primary {
    @apply btn px-4 py-2;
    @apply bg-claude-orange-600 text-white;
    @apply hover:bg-claude-orange-700;
    @apply focus-visible:ring-claude-orange-500;
  }

  .btn-secondary {
    @apply btn px-4 py-2;
    @apply bg-surface-tertiary text-text-primary;
    @apply hover:bg-claude-sand-300;
    @apply focus-visible:ring-claude-sand-500;
  }

  .btn-ghost {
    @apply btn px-4 py-2;
    @apply text-text-secondary;
    @apply hover:bg-surface-tertiary hover:text-text-primary;
    @apply focus-visible:ring-claude-sand-500;
  }

  .btn-icon {
    @apply btn p-2;
    @apply text-text-secondary;
    @apply hover:bg-surface-tertiary hover:text-text-primary;
    @apply focus-visible:ring-claude-sand-500;
  }

  /* Input base */
  .input {
    @apply w-full px-4 py-2;
    @apply bg-surface-primary text-text-primary;
    @apply border border-border-primary rounded-lg;
    @apply placeholder:text-text-tertiary;
    @apply transition-colors duration-200;
    @apply focus:border-claude-orange-500 focus:ring-1 focus:ring-claude-orange-500;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center gap-1;
    @apply px-2 py-0.5 text-xs font-medium rounded-full;
  }

  .badge-default {
    @apply badge bg-surface-tertiary text-text-secondary;
  }

  .badge-primary {
    @apply badge bg-claude-orange-100 text-claude-orange-700;
  }

  .badge-success {
    @apply badge bg-success-100 text-success-700;
  }

  .badge-warning {
    @apply badge bg-warning-100 text-warning-700;
  }

  .badge-error {
    @apply badge bg-error-100 text-error-700;
  }

  /* Loading skeleton */
  .skeleton {
    @apply bg-surface-tertiary rounded animate-pulse;
  }

  /* Shimmer effect */
  .shimmer {
    @apply relative overflow-hidden;
    @apply bg-gradient-to-r from-surface-tertiary via-surface-secondary to-surface-tertiary;
    background-size: 200% 100%;
    @apply animate-shimmer;
  }

  /* Claude Design Language - Message bubbles */
  .claude-user-message {
    background-color: var(--claude-user-bubble);
    color: var(--claude-user-bubble-text);
    border-radius: var(--radius);
  }

  .claude-assistant-message {
    background-color: var(--claude-assistant-bubble);
    color: var(--claude-assistant-bubble-text);
    border-radius: var(--radius);
  }

  /* Claude Design Language - Tool states */
  .claude-tool-use {
    background-color: var(--claude-tool-use-bg);
    border-radius: var(--radius);
  }

  .claude-tool-result {
    background-color: var(--claude-tool-result-bg);
    border-radius: var(--radius);
  }

  .claude-tool-error {
    background-color: var(--claude-tool-error-bg);
    border-radius: var(--radius);
  }
}

@layer utilities {
  /* Text gradient */
  .text-gradient {
    @apply bg-gradient-to-r from-claude-orange-500 to-claude-orange-700;
    @apply bg-clip-text text-transparent;
  }

  /* Backdrop blur with fallback */
  .backdrop-blur-safe {
    @apply backdrop-blur-md;
    @supports not (backdrop-filter: blur(12px)) {
      @apply bg-surface-primary/95;
    }
  }

  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Smooth scroll */
  .scroll-smooth {
    scroll-behavior: smooth;
  }

  /* Container query support */
  @supports (container-type: inline-size) {
    .container-query {
      container-type: inline-size;
    }
  }

  /* Safe area insets for mobile */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
}
