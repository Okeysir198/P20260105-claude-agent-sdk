agent_id: debt_collection
sub_agent_id: introduction
description: "Tests for introduction agent - person confirmation"

# Test Data Configuration
# All tests use this debtor profile unless overridden
default_test_data:
  full_name: "John Smith"
  user_id: "U12345"
  username: "jsmith001"
  id_number: "8501015800087"
  birth_date: "1985-01-15"
  email: "john.smith@example.com"
  contact_number: "0821234567"
  outstanding_amount: 2500.00
  overdue_days: 45
  script_type: "ratio1_inflow"  # Options: ratio1_inflow, short_paid, pro_rata_new, recently_suspended_120
  account_status: "active"  # Options: active, cancelled

test_cases:
  - name: "INT-001: Person confirms identity"
    test_type: single_turn
    tags: [unit, introduction, happy-path]
    turns:
      - user_input: "Yes, speaking"
        assertions:
          - type: contains_function_call
            value: "confirm_person"

  - name: "INT-002: Wrong number"
    test_type: single_turn
    tags: [unit, introduction]
    turns:
      - user_input: "Sorry, wrong number. I don't know anyone by that name."
        assertions:
          - type: contains_function_call
            value: "handle_wrong_person"

  - name: "INT-003: Third party - spouse"
    test_type: single_turn
    tags: [unit, introduction]
    turns:
      - user_input: "That's my husband, he's not here right now"
        assertions:
          - type: contains_function_call
            value: "handle_third_party"

  - name: "INT-004: Callback request"
    test_type: single_turn
    tags: [unit, introduction]
    turns:
      - user_input: "Can you call back tomorrow at 10?"
        assertions:
          - type: contains_function_call
            value: "schedule_callback"

  - name: "INT-005: Person confirms - alternative phrasing"
    test_type: single_turn
    tags: [unit, introduction]
    turns:
      - user_input: "Yes, that's me"
        assertions:
          - type: contains_function_call
            value: "confirm_person"

  - name: "INT-006: Third party - family member"
    test_type: single_turn
    tags: [unit, introduction]
    turns:
      - user_input: "This is his son, he's at work right now"
        assertions:
          - type: contains_function_call
            value: "handle_third_party"
