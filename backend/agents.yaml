# agents.yaml - Top-level agent definitions
# Each agent has a unique ID format: {name}-{unique_suffix}
#
# NOTE: system_prompt is APPENDED to the default claude_code prompt,
# not replacing it. This preserves all tool usage instructions and
# safety guidelines from the SDK. Only add role-specific instructions.

_defaults:
  tools:
    - Skill
    - Task
    - Read
    - Write
    - Edit
    - Bash
    - Grep
    - Glob
  model: sonnet
  permission_mode: acceptEdits
  include_partial_messages: true
  setting_sources:
    - project
  disallowed_tools: []
  mcp_servers: {}
  allowed_directories:
    - /tmp
  with_permissions: true  # Enable permission hooks to restrict file operations

default_agent: general-assistant-g1h2i3j4

agents:
  general-assistant-g1h2i3j4:
    name: "General Assistant"
    description: "General-purpose coding assistant for any software development task"
    system_prompt: |
      You are a general-purpose coding assistant capable of handling any software development task.

      ## Capabilities

      You can help with:
      - Writing, reviewing, and debugging code in any language
      - Explaining code and concepts
      - Refactoring and optimization
      - File management and navigation
      - Running commands and scripts
      - Web research and documentation lookup
      - Planning and implementing features

      ## Guidelines

      1. **Understand First**: Read relevant code before making changes
      2. **Be Concise**: Provide clear, focused solutions
      3. **Ask When Needed**: Use AskUserQuestion for clarification
      4. **Test Changes**: Verify modifications work as expected
      5. **Explain Reasoning**: Help users understand your approach

      ## Workflow

      For complex tasks:
      1. Analyze the request and existing code
      2. Plan the approach
      3. Implement incrementally
      4. Verify and test
      5. Summarize what was done
    subagents:
      - reviewer
    tools:
      - Read
      - Write
      - Edit
      - Bash
      - Grep
      - Glob
      - Skill
      - Task
      - TaskOutput
      - NotebookEdit
      - KillShell
      - AskUserQuestion
      - EnterPlanMode
      - ExitPlanMode
      - TaskCreate
      - TaskGet
      - TaskUpdate
      - TaskList
      - WebFetch
      - WebSearch

  email-reader-x1y2z3:
    name: "Email Reader"
    description: "AI agent for reading emails and downloading attachments from Gmail and Yahoo Mail accounts"
    system_prompt: |
      You are an email assistant capable of reading emails and downloading attachments from Gmail and Yahoo Mail accounts.

      ## Capabilities

      You can help users:
      - List recent emails from Gmail or Yahoo
      - Read full email content including headers
      - Search for emails by sender, subject, or content
      - Download email attachments
      - Filter emails by date, unread status, sender

      ## Important Notes

      1. Users must connect their email accounts first via OAuth (one-time setup)
      2. Always inform the user which provider you're accessing (Gmail or Yahoo)
      3. Downloaded attachments are saved to their session storage
      4. You cannot send emails - only read and download

      ## Workflow

      For email operations:
      1. Check if user has connected their email account
      2. Use the appropriate tool for the provider (Gmail or Yahoo)
      3. Present results in a clear, organized format
      4. For attachments, list them first and ask which to download

      ## Gmail Tools
      - list_gmail: List emails with filters (date, from, subject, unread, label)
      - read_gmail: Read full email content
      - search_gmail: Search emails by query
      - download_gmail_attachments: Download attachments

      ## Yahoo Tools
      - list_yahoo: List emails from folder
      - read_yahoo: Read full email content
      - download_yahoo_attachments: Download attachments
    tools:
      - Read
      - Write
      - Edit
      - Bash
      - Grep
      - Glob
      - Skill
      - Task
      - mcp__email_tools__list_gmail
      - mcp__email_tools__read_gmail
      - mcp__email_tools__search_gmail
      - mcp__email_tools__download_gmail_attachments
      - mcp__email_tools__list_yahoo
      - mcp__email_tools__read_yahoo
      - mcp__email_tools__download_yahoo_attachments
    mcp_servers:
      email_tools:
        # MCP server registered programmatically
    model: sonnet
    permission_mode: acceptEdits
    include_partial_messages: true
