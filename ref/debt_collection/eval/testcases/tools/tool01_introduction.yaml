agent_id: debt_collection
sub_agent_id: introduction
description: "Critical happy-path tests for introduction agent tools - confirm_person, handle_wrong_person, handle_third_party"

# Test Data Configuration
# All tests use this debtor profile unless overridden
default_test_data:
  full_name: "John Smith"
  user_id: "U12345"
  username: "jsmith001"
  id_number: "8501015800087"
  birth_date: "1985-01-15"
  email: "john.smith@example.com"
  contact_number: "0821234567"
  outstanding_amount: 2500.00
  overdue_days: 45
  script_type: "ratio1_inflow"
  account_status: "active"

test_cases:
  # =================================================================
  # confirm_person tool tests (1 happy-path test)
  # =================================================================

  - name: "TOL-INT-001: confirm_person with affirmative response"
    test_type: single_turn
    tags: [unit, tool, introduction, confirm_person, happy-path]
    turns:
      - user_input: "Yes, speaking"
        assertions:
          - type: contains_function_call
            value: "confirm_person"
            description: "Agent should call confirm_person when user clearly confirms identity"
          - type: llm-rubric
            value: "Agent recognizes affirmative confirmation and proceeds appropriately without redundant questions"

  # =================================================================
  # handle_wrong_person tool tests (1 happy-path test)
  # =================================================================

  - name: "TOL-INT-004: handle_wrong_person with direct wrong number"
    test_type: single_turn
    tags: [unit, tool, introduction, handle_wrong_person]
    turns:
      - user_input: "No, wrong number"
        assertions:
          - type: contains_function_call
            value: "handle_wrong_person"
            description: "Agent should call handle_wrong_person when caller explicitly states wrong number"
          - type: llm-rubric
            value: "Agent responds professionally and apologetically before ending the call"

  # =================================================================
  # handle_third_party tool tests (1 happy-path test)
  # =================================================================

  - name: "TOL-INT-007: handle_third_party with family member (spouse)"
    test_type: single_turn
    tags: [unit, tool, introduction, handle_third_party]
    turns:
      - user_input: "That's my husband, he's not here right now"
        assertions:
          - type: contains_function_call
            value: "handle_third_party"
            description: "Agent should call handle_third_party when third party identifies as spouse"
          - type: function_call_parameter
            function: "handle_third_party"
            parameter: "relationship"
            value_contains: "spouse"
            description: "Agent should correctly identify relationship as spouse"
          - type: llm-rubric
            value: "Agent requests to leave a callback message and remains professional"
